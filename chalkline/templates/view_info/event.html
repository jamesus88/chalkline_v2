<head>
    <link rel="stylesheet" href="{{url_for('static', filename='view_game/view.css')}}">
</head>

{% extends "design.html" %}

{% block title %}View Event{% endblock title %}

{% block content %}
<main>
    <center>
        <h1>View Event</h1>
        <h4 class='error'>{{msg}}</h4>
    </center>
    {% if 'admin' not in user.role %}
        <section>
            <center>
                <h2>{{event.eventLocation}} - {{event.eventType}}</h2>
                <h3>{{event.eventDate.strftime('%a %m/%d @ %H:%M')}}</h3>
                <h3>{{event.eventVenue}} Field {{event.eventField}}</h3>
                {% if event.eventType == 'Game' %}
                <h3>(away) {{event.awayTeam}} vs. {{event.homeTeam}} (home)</h3>
                <h3>Umpire Duty: {{event.umpireDuty}}</h3>
                {% else %}
                <h3>Team: {{event.homeTeam}}</h3>
                {% endif %}
            </center>
        </section>
        <section>
            <center>
                <h3>Status: {{event.status}}</h3>
            </center>
        </section>
        {% if event.eventType == 'Game' %}
        <section>
            <center>
                <h2>Plate Umpire: {{event.plateUmpireInfo.fLast}}</h2>
                <h3>Email: {{event.plateUmpireInfo.email}}</h3>
                <h3>Phone: {{event.plateUmpireInfo.phone}}</h3>
            </center>
        </section>
        <section>
            <center>
                <h2>Field Umpire: {{event.field1UmpireInfo.fLast}}</h2>
                <h3>Email: {{event.field1UmpireInfo.email}}</h3>
                <h3>Phone: {{event.field1UmpireInfo.phone}}</h3>
            </center>
        </section>
        <section>
            <center>
                <h2>Coach Request: {{event.fieldRequestInfo.fLast}}</h2>
                <h3>Email: {{event.fieldRequestInfo.email}}</h3>
                <h3>Phone: {{event.fieldRequestInfo.phone}}</h3>
            </center>
        </section>  
        {% endif %}
    {% else %}
    <form method="post" id="updateEvent">
        <div class="split">
            <h3 class="urgent">You are authorized to edit event data.</h3>
            <button class="action" name="updateEvent" value="updateEvent" type="submit">Save Changes</button>
        </div>
        <section>
            <center>
                <h2>
                    <input type="text" name="eventLocation" id="eventLocation" value="{{event.eventLocation}}" disabled> - 
                    <select name="eventType" id="eventType">
                        <option value="Game">Game</option>
                        <option value="Practice">Practice</option>
                    </select>
                </h2>
                <h3><input type="datetime-local" name="eventDate" id="eventDate" value="{{event.eventDate}}"></h3>
                <h3>Age Group: <select name="eventAgeGroup" id="eventAgeGroup">
                    <option value="T-Ball">T-Ball</option>
                    <option value="Coach Pitch">Coach Pitch</option>
                    <option value="AA">AA</option>
                    <option value="AAA">AAA</option>
                    <option value="Majors">Majors</option>
                    <option value="50/70">50/70</option>
                    <option value="Juniors">Juniors</option>
                </select></h3>
                <h3><input type="text" name="eventVenue" id="eventVenue" value="{{event.eventVenue}}"> Field <input type="number" name="eventField" id="eventField" value="{{event.eventField}}"></h3>
                {% if event.eventType == 'Game' %}
                <h3>(away) 
                    <select name="awayTeam" id="awayTeam">
                        {% for team in teamsList %}
                            <option value="{{team.teamId}}">{{team.teamId}}</option>
                        {% endfor %}
                    </select> vs. 
                    <select name="homeTeam" id="homeTeam">
                        {% for team in teamsList %}
                            <option value="{{team.teamId}}">{{team.teamId}}</option>
                        {% endfor %}
                    </select> (home)
                </h3>
                <h3>Umpire Duty: 
                    <select name="umpireDuty" id="umpireDuty">
                        {% for team in teamsList %}
                            <option value="{{team.teamId}}">{{team.teamId}}</option>
                        {% endfor %}
                    </select>
                </h3>
                {% else %}
                <h3>Team: <select name="homeTeam" id="homeTeam">
                    {% for team in teamsList %}
                        <option value="{{team.teamId}}">{{team.teamId}}</option>
                    {% endfor %}
                </select></h3>
                {% endif %}
            </center>
            <script>
                document.getElementById('awayTeam').value = "{{event.awayTeam}}";
                document.getElementById('homeTeam').value = "{{event.homeTeam}}";
                document.getElementById('umpireDuty').value = "{{event.umpireDuty}}";
                document.getElementById('eventAgeGroup').value = "{{event.eventAgeGroup}}";
            </script>
        </section>
        <section>
            <center>
                <h2>Status: <input type="text" name="status" id="status" value="{{event.status}}"></h2>
            </center>
        </section>
        {% if event.eventType == 'Game' %}
        <section>
            <center>
                <h2>Plate Umpire: <select name="plateUmpire" id="plateUmpire">
                    <option value="None">None</option>
                    {% for user in userList if 'umpire' in user.role or 'youth' in user.role %}
                        <option value="{{user._id}}">{{user.lastName}}, {{user.firstName}}</option>
                    {% endfor %}
                </select></h2>
                <h3>Email: {{event.plateUmpireInfo.email}}</h3>
                <h3>Phone: {{event.plateUmpireInfo.phone}}</h3>
            </center>
        </section>
        <section>
            <center>
                <h2>Field Umpire: <select name="field1Umpire" id="field1Umpire">
                    <option value="None">None</option>
                    {% for user in userList if 'umpire' in user.role or 'youth' in user.role %}
                        <option value="{{user._id}}">{{user.lastName}}, {{user.firstName}}</option>
                    {% endfor %}
                </select></h2>
                <h3>Email: {{event.field1UmpireInfo.email}}</h3>
                <h3>Phone: {{event.field1UmpireInfo.phone}}</h3>
            </center>
        </section>
        <section>
            <center>
                <h2>Coach Request: <select name="fieldRequest" id="fieldRequest">
                    <option value="None">None</option>
                    {% for user in userList if 'coach' in user.role %}
                        <option value="{{user._id}}">{{user.lastName}}, {{user.firstName}}</option>
                    {% endfor %}
                </select></h2>
                <h3>Email: {{event.fieldRequestInfo.email}}</h3>
                <h3>Phone: {{event.fieldRequestInfo.phone}}</h3>
            </center>
        </section>
        <script>
            document.getElementById('plateUmpire').value = "{{event.plateUmpireInfo._id}}";
            document.getElementById('field1Umpire').value = "{{event.field1UmpireInfo._id}}";
            document.getElementById('fieldRequest').value = "{{event.fieldRequestInfo._id}}";
        </script>
        <section>
            <center>
                <h2>Edit Rules</h2>
                <p>These rules govern how users interact with this event.</p>
                <h3>Visible: <input type="checkbox" name="visible" id="visible"></h3>
                <h3>Can add plate umpire: <input type="checkbox" name="plateUmpireAddable" id="plateUmpireAddable"></h3>
                <h3>Can add field umpire: <input type="checkbox" name="field1UmpireAddable" id="field1UmpireAddable"></h3>
                <h3>Umpires need permission to remove game: <input type="checkbox" name="requireRemoveRequest" id="requireRemoveRequest"></h3>
                <h3>Can add coach request: <input type="checkbox" name="fieldRequestAddable" id="fieldRequestAddable"></h3>
                <h3>Coaches can remove request: <input type="checkbox" name="fieldRequestRemovable" id="fieldRequestRemovable"></h3>
            </center>
            <script>
                if ("{{event.editRules.visible}}" == "True") {
                    document.getElementById('visible').checked = true;
                }
                if ("{{event.editRules.plateUmpireAddable}}" == "True") {
                    document.getElementById('plateUmpireAddable').checked = true;
                }
                if ("{{event.editRules.field1UmpireAddable}}" == "True") {
                    document.getElementById('field1UmpireAddable').checked = true;
                }
                if ("{{event.editRules.fieldRequestAddable}}" == "True") {
                    document.getElementById('fieldRequestAddable').checked = true;
                }
                if ("{{event.editRules.requireRemoveRequest}}" == "True") {
                    document.getElementById('requireRemoveRequest').checked = true;
                }
                if ("{{event.editRules.fieldRequestRemovable}}" == "True") {
                    document.getElementById('fieldRequestRemovable').checked = true;
                }
            </script>
        </section>
        {% endif %}
    </form>
    {% endif %}
    
</main>

{% endblock content %}