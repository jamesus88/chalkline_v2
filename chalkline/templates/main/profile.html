<head>
    <link rel="stylesheet" href="{{url_for('static', filename='main/home.css')}}">
</head>
{% extends "design.html" %}

{% block title %}Create Profile{% endblock title %}

{% block content %}
<main>
    <center>
        <h1>Profile</h1>
        <h3>Need Help? Check the <a href="{{url_for('docs.profile')}}">Docs</a>. Or <a href="{{url_for('main.home')}}">Return Home</a>.</h3>
        <h4></h4>
        <h3 class='error'>{{msg}}</h3>

        {% if 'coach' in user.role or 'parent' in user.role %}
        <section>
            <form method="post" id="teams">
                <h3>My Teams</h3>
                <table id="teamCodes" class="center">
                    
                    {% if teamsList|length > 0 %}
                        <tr>
                            <th>Team Code</th>
                            <th>Team Name</th>
                            <th>Remove</th>
                        </tr>
                        {% for team in teamsList %}
                        <tr>
                            <td>{{team['teamId']}}</td>
                            <td>{{team['teamName']}}</td>
                            <td><button name="removeTeam" value="{{team['teamId']}}" class="action">Remove</button></td>
                        </tr>
                        {% endfor %}
                    {% else %}
                        <h3 class="error">No teams associated with this account.</h3>
                    {% endif %}
                    
                </table>
            </form>

            <h3>Add Team</h3>

            <form method="post">
                <table class="center">
                    <tr>
                        <td><label for="newTeam">Add Team Code</label></td>
                        <td><select name="newTeam" id="newTeam" required>
                            <option value="none" disabled selected>Select</option>
                            {% for team in allTeams %}
                                <option value="{{team.teamId}}">{{team.teamId}}</option>
                            {% endfor %}
                        </select></td>
                    </tr>
                </table>
                <button class="action" type="submit" name="addTeam" value="addTeam">Add Team</button>
            </form>
        </section>
        {% endif %}
        
        <section>
            <form method="post" id="profile">
                <h3>Personal Information</h3>
                <table class="center">
                    <tr>
                        <td><label for="firstName">First Name</label></td>
                        <td><input type="text" name="firstName" id="firstName" value={{user.firstName}} required></td>
                    </tr>
                    <tr>
                        <td><label for="lastName">Last Name</label></td>
                        <td><input type="text" name="lastName" id="lastName" value={{user.lastName}} required></td>
                    </tr>
                    <tr>
                        <td><label for="email">Email</label></td>
                        <td><input type="email" name="email" id="email" value={{user.email}} required></td>
                    </tr>
                    <tr>
                        <td><label for="phone">Phone</label></td>
                        <td><input type="tel" name="phone" id="phone" pattern="[0-9]{10}" value={{user.phone}} required></td>
                    </tr>
                    <tr>
                        <td><label for="emailNotifications">Receive email alerts</label></td>
                        <td><input type="checkbox" name="emailNotifications" id="emailNotifications" checked></td>
                    </tr>
                    <tr>
                        <td><label for="phoneNotifications">Receive text alerts</label></td>
                        <td><input type="checkbox" name="phoneNotifications" id="phoneNotifications" checked></td>
                    </tr>
                    <tr>
                        <td><label for="hideEmail">Hide my email from other users</label></td>
                        <td><input type="checkbox" name="hideEmail" id="hideEmail"></td>
                    </tr>
                    <tr>
                        <td><label for="hidePhone">Hide my phone number from other users</label></td>
                        <td><input type="checkbox" name="hidePhone" id="hidePhone"></td>
                    </tr>
                </table>

                <script>
                    let user = {{user | tojson}};
                    if (!user.emailNotifications) {
                        document.getElementById('emailNotifications').checked = false;
                    }
                    if (!user.phoneNotifications) {
                        document.getElementById('phoneNotifications').checked = false;
                    }
                    if (user.hideEmail) {
                        document.getElementById('hideEmail').checked = true;
                    }
                    if (user.hidePhone) {
                        document.getElementById('hidePhone').checked = true;
                    }
                </script>
                

                <button class="action" type="submit" name="updateProfile" value="updateProfile">Save</button>
            </form>
        </section>
        <section>
            <h3>Session</h3>
            <form method="post" id="logout">
                <button class="action" type="submit" name="logout" value="logout"><b>Sign Out</b></button>
            </form>
        </section>
            
    </center>
</main>

{% endblock content %}