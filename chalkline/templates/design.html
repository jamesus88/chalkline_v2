<!DOCTYPE html>
<html lang="en">
<head>
    <!-- meta -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- font awesome -->
    <script src="https://kit.fontawesome.com/9794118ac5.js" crossorigin="anonymous"></script>

    <!-- base design files -->
    <link rel="stylesheet" href="{{url_for('static', filename='design.css')}}">
    <link rel="stylesheet" href="{{url_for('static', filename='navbar.css')}}">
    <script src="{{url_for('static', filename='main.js')}}" defer></script>


    <!-- icon -->
    <link rel="shortcut icon" href="{{url_for('static', filename='chalkline-icon.png')}}" type="image/x-icon">

    <!-- title -->
    <title>Chalkline Baseball | {% block title %}{% endblock title %}</title>
</head>

<div id="html-container">
    <nav id="main-navbar" class="topnav">
        <a id="menu-title" href="{{url_for('main.home')}}"><b id="title">Chalkline Baseball</b>&trade;</a>

            {% if res.user %}

                {% if 'coach' in res.user.groups.get(res.league.leagueId) %}
                <div class="dropdown dropdown-team">
                    <button class="dropdown-button">Teams <i class="fa-solid fa-caret-down"></i></button>
                    <div class="dropdown-content team">
                        <a href="{{url_for('teams.schedule')}}">Team Schedule</a>
                        <a href="{{url_for('teams.info')}}">Team Info</a>
                    </div>
                </div>
                {% endif %}
                
                {% if 'umpire' in res.user.groups.get(res.league.leagueId) %}
                <div class="dropdown dropdown-umpire">
                    <button class="dropdown-button">Umpire <i class="fa-solid fa-caret-down"></i></button>
                    <div class="dropdown-content umpire">
                        <a href="{{url_for('umpire.schedule')}}">Umpire Schedule</a>
                        <a href="{{url_for('umpire.assignments')}}">My Games</a>
                    </div>
                </div>
                {% endif %}

                {% if 'director' in res.user.groups.get(res.league.leagueId) %}
                <div class="dropdown dropdown-board">
                    <button class="dropdown-button">Director <i class="fa-solid fa-caret-down"></i></button>
                    <div class="dropdown-content umpire">
                        <a href="{{url_for('director.schedule')}}">Director Schedule</a>
                        <a href="{{url_for('director.shifts')}}">My Shifts</a>
                    </div>
                </div>
                {% endif %}

                <div class="dropdown dropdown-league">
                    <button class="dropdown-button">League <i class="fa-solid fa-caret-down"></i></button>
                    <div class="dropdown-content league">
                        <a href="{{url_for('league.master_schedule')}}">Master Schedule</a>
                        <a href="{{url_for('league.status')}}">Field Status</a>
                    </div>
                </div>

                {% if res.admin %}
                <div class="dropdown dropdown-admin">
                    <button class="dropdown-button">Admin <i class="fa-solid fa-caret-down"></i></button>
                    <div class="dropdown-content admin">
                        <a href="{{url_for('admin.event_data')}}">Events</a>
                        <a href="{{url_for('admin.user_data')}}">Users</a>
                        <a href="{{url_for('admin.team_data')}}">Teams</a>
                        <a href="{{url_for('admin.manage_league')}}">League</a>
                        <a href="{{url_for('admin.announcement')}}">Announcements</a>
                    </div>
                </div>
                {% endif %}

            {% endif %}

        <a href="{{url_for('main.home', _anchor='about')}}">About</a>
        
        <div class="nav-right">
            {% if not res.user %}
            <a href="{{url_for('main.signup')}}">Create Account</a>
            <a class="sign-in" href="{{url_for('main.login')}}">Sign In</a>
            {% else %}
            <a href="{{url_for('main.profile', _anchor="session")}}">{{res.league.name}}</a>
            <a class="sign-in" href="{{url_for('main.profile')}}">Account</a>
            {% endif %}
            <a href="#" class="menu-bars" onclick="showMobileNav()"><i class="fa-solid fa-bars"></i></a>
        </div>
    </nav>

    <body>
        {% if res.flash %}<p class="error">{{res.flash}}</p>{% endif %}

        {% if res.popup %}
        <dialog class="popup" id="popup_design" openModal>
            <a onclick="closePopup('design')" class="error"><i class="fa-solid fa-xmark"></i> Close</a>
            <center>
                <h3>{{res.popup}}</h3>
            </center>
        </dialog>
        {% endif %}

        {% block content %}{% endblock content %}
    </body>
    
    <footer>
        <p>Created and Maintained by Aidan Hurwitz</p>
        <p>Chalkline Baseball&trade; {{res.version}}</p>
        <p>Copyright &copy; {{res.copyright}} Aidan Hurwitz</p>
    </footer>

</div>
<script>
    function showMobileNav() {
        var x = document.getElementById("main-navbar");
        if (x.className === "topnav") {
          x.className += " responsive";
        } else {
          x.className = "topnav";
        }
      }
</script>
</html>